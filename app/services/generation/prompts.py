"""
Библиотека промптов для генерации заданий.
"""

# Системный промпт для генерации заданий
SYSTEM_PROMPT_TASK_GENERATOR = """Ты - опытный педагог-дефектолог, специализирующийся на создании адаптивных заданий для детей с особыми образовательными потребностями (ОВЗ).

Твоя задача - создавать образовательные задания, которые:
1. Соответствуют принципам Universal Design for Learning (UDL)
2. Учитывают индивидуальные особенности ученика
3. Используют методику скэффолдинга (постепенное снижение поддержки)
4. Мотивируют и поддерживают позитивную самооценку ученика

Всегда отвечай на русском языке. Формулируй задания простым, понятным языком."""

# Промпт для генерации задания
PROMPT_GENERATE_TASK = """Создай образовательное задание по следующим параметрам:

## Профиль ученика
- Класс: {grade}
- Особенности: {disabilities}
- Стиль обучения: {learning_style}
- Текущий уровень сложности: {current_difficulty}
- Уровень скэффолдинга: {scaffolding_level}

## Параметры задания
- Предмет: {subject}
- Тема: {topic}
- Уровень сложности: {difficulty}

## Требования к заданию
1. Адаптируй формулировку под особенности ученика
2. Добавь подсказки согласно уровню скэффолдинга
3. Учитывай стиль обучения при выборе формата
4. Сформулируй позитивную обратную связь

Верни JSON в следующем формате:
{{
    "title": "Краткое название задания",
    "type": "multiple_choice | fill_blank | matching | ordering | open_ended",
    "question": "Текст вопроса с адаптациями",
    "options": ["вариант1", "вариант2", ...],  // для multiple_choice
    "correct_answer": "правильный ответ",
    "hints": ["подсказка 1", "подсказка 2", ...],
    "explanation": "Объяснение правильного ответа",
    "reasoning": "Почему задание адаптировано именно так"
}}"""

# Промпт для адаптации существующего задания
PROMPT_ADAPT_TASK = """Адаптируй существующее задание для ученика с особенностями.

## Исходное задание
{original_task}

## Профиль ученика
- Особенности: {disabilities}
- Стиль обучения: {learning_style}
- Уровень скэффолдинга: {scaffolding_level}

## Требования к адаптации
{adaptation_requirements}

Верни JSON в следующем формате:
{{
    "adapted_question": "Адаптированный текст вопроса",
    "adapted_options": ["адаптированный вариант1", ...],
    "additional_hints": ["дополнительная подсказка", ...],
    "visual_supports": ["описание визуальной поддержки"],
    "audio_script": "Текст для озвучивания",
    "simplification_notes": "Что было упрощено и почему"
}}"""

# Промпты для разных типов ОВЗ
DISABILITY_PROMPTS = {
    "dyslexia": """
Для ученика с дислексией:
- Используй простые, короткие предложения
- Избегай слов со сложными буквосочетаниями
- Разбивай текст на небольшие абзацы
- Используй маркированные списки
- Добавь возможность прослушивания текста""",

    "dyscalculia": """
Для ученика с дискалькулией:
- Визуализируй числовые данные
- Используй наглядные примеры с реальными объектами
- Разбивай математические задачи на маленькие шаги
- Избегай абстрактных числовых понятий
- Добавь визуальные подсказки для вычислений""",

    "dysgraphia": """
Для ученика с дисграфией:
- Предлагай варианты ответов вместо свободного письма
- Используй задания на выбор/сопоставление
- Минимизируй объём письменных ответов
- Добавь возможность голосового ввода""",

    "adhd": """
Для ученика с СДВГ:
- Разбивай задание на короткие этапы
- Добавь визуальный таймер/прогресс-бар
- Используй яркие визуальные элементы
- Включай интерактивные элементы
- Давай немедленную обратную связь""",

    "asd": """
Для ученика с РАС:
- Используй чёткую, предсказуемую структуру
- Избегай метафор и идиом
- Давай конкретные, однозначные инструкции
- Используй визуальное расписание шагов
- Предупреждай о переходах между заданиями""",

    "hearing": """
Для ученика с нарушениями слуха:
- Используй визуальные инструкции
- Добавь субтитры ко всему аудио
- Используй анимации и видео
- Выделяй ключевые слова визуально""",

    "visual": """
Для ученика с нарушениями зрения:
- Используй увеличенный шрифт
- Обеспечь высокую контрастность
- Добавь полное аудиоописание
- Используй тактильные элементы где возможно
- Структурируй текст для скринридера""",

    "intellectual": """
Для ученика с интеллектуальными нарушениями:
- Используй максимально простой язык
- Разбивай задачу на мельчайшие шаги
- Добавь много повторений
- Используй наглядные примеры из жизни
- Дай много времени на выполнение""",
}

# Промпт для объяснения рекомендаций (XAI)
PROMPT_EXPLAIN_RECOMMENDATION = """Объясни, почему было выбрано именно это задание для ученика.

## Профиль ученика
{student_profile}

## Выбранное задание
{task_info}

## История выполнения
{progress_history}

Объясни простым языком:
1. Почему именно эта тема сейчас актуальна
2. Почему выбран такой уровень сложности
3. Какие адаптации применены и зачем
4. Какой следующий шаг рекомендуется

Верни JSON:
{{
    "reasoning": "Основное объяснение",
    "factors": ["фактор 1", "фактор 2"],
    "adaptations_explained": {{"адаптация": "причина"}},
    "next_steps": ["рекомендация 1", "рекомендация 2"]
}}"""

# Промпт для генерации обратной связи
PROMPT_GENERATE_FEEDBACK = """Сгенерируй позитивную обратную связь для ученика.

## Результат выполнения
- Задание: {task_title}
- Правильный ответ: {correct}
- Ответ ученика: {student_answer}
- Использовано подсказок: {hints_used}
- Время выполнения: {time_spent}

## Профиль ученика
- Особенности: {disabilities}
- Текущий уровень: {current_level}

Требования:
1. Всегда начинай с позитива
2. Мягко объясни ошибку (если есть)
3. Дай конкретный совет для улучшения
4. Поддержи мотивацию

Верни JSON:
{{
    "message": "Короткое сообщение (1-2 предложения)",
    "detailed": "Подробное объяснение",
    "encouragement": "Мотивирующее сообщение",
    "tip": "Совет для следующего раза"
}}"""

# Словарь предметов на русском
SUBJECT_NAMES = {
    "russian": "Русский язык",
    "math": "Математика",
    "reading": "Чтение/Литература",
    "natural_science": "Окружающий мир",
    "english": "Английский язык",
    "other": "Другое",
}

# Словарь уровней сложности
DIFFICULTY_NAMES = {
    1: "Очень лёгкий",
    2: "Лёгкий",
    3: "Средний",
    4: "Сложный",
    5: "Очень сложный",
}

# Словарь уровней скэффолдинга
SCAFFOLDING_NAMES = {
    1: "Полная поддержка (максимум подсказок)",
    2: "Высокая поддержка (много подсказок)",
    3: "Средняя поддержка (базовые подсказки)",
    4: "Минимальная поддержка (редкие подсказки)",
    5: "Самостоятельно (без подсказок)",
}

# Словарь стилей обучения
LEARNING_STYLE_NAMES = {
    "visual": "Визуальный (предпочитает картинки, схемы)",
    "auditory": "Аудиальный (предпочитает слушать)",
    "kinesthetic": "Кинестетический (предпочитает действия)",
    "reading": "Чтение/Письмо (предпочитает текст)",
}
